<div id="personal-info-vertical" class="content fade active">
	<div class="content-header">
		<h5 class="mb-0">Child Info</h5>
		<small>Fill Child Information</small>
	</div>
	<div class="nav-vertical">
		<ul ngbNav #navVerticalRight="ngbNav" class="nav nav-tabs nav-right flex-column">
			<li ngbNavItem>
				<a ngbNavLink>Add New</a>
				<ng-template ngbNavContent>
					<h6>Add New Child</h6>
					<form class="auth-login-form mt-2" [formGroup]="childForm">
						<app-image-upload-or-capture [imageDataUrl]="formControls.photo.value" (imageClicked)="handleImage($event)"></app-image-upload-or-capture>
						<div class="form-row">
							<div class="form-group col-md-4">
								<label class="form-label" for="vertical-firstname">First Name</label>
								<input type="text" id="vertical-firstname" class="form-control" formControlName="firstName"/>
							</div>
							<div class="form-group col-md-4">
								<label class="form-label" for="vertical-middle-name">Middle Name</label>
								<input
									type="text"
									id="vertical-middle-name"
									class="form-control"
									formControlName="middleName"
								/>
							</div>
							<div class="form-group col-md-4">
								<label class="form-label" for="vertical-last-name">Last Name</label>
								<input
									type="email"
									id="vertical-last-name"
									class="form-control"
									formControlName="lastName"
								/>
							</div>
						</div>
						<div class="form-row">
							<div class="form-group col-md-4">
								<label class="form-label" for="vertical-date-of-birth">Date of Birth</label>
								<input
								type="date"
								id="vertical-date-of-birth"
								class="form-control"
								formControlName="dateOfBirth"
							/>
							</div>
							<div class="form-group col-md-4">
								<label class="form-label" for="vertical-sex">Sex</label>
								<ng-select
								[items]="sexOptions"
								[searchable]="false"
								bindLabel="name"
								bindValue="id"
								formControlName="sex">
							</ng-select>
							</div>
							<div class="form-group col-md-4">
								<label class="form-label" for="vertical-nationality">Nationality</label>
								<ng-select
								[items]="countryOptions"
								bindLabel="name"
								bindValue="id"
								formControlName="nationalityCountryId">
							</ng-select>
							</div>
						</div>
						<div class="d-flex justify-content-between">
							<button class="btn btn-primary btn-prev" (click)="previousClicked()" rippleEffect>
								<i data-feather="arrow-left" class="align-middle mr-sm-25 mr-0"></i>
								<span class="align-middle d-sm-inline-block d-none">Previous</span>
							</button>
							<div ngbDropdown class="btn-group" placement="top">
								<button type="button" class="btn btn-primary btn-next" (click)="addFromFormAndNext()" rippleEffect>
									{{labels.next}}
									<i data-feather="arrow-right" class="align-middle ml-sm-25 ml-0"></i>
								</button>
								<button ngbDropdownToggle type="button" class="btn btn-primary dropdown-toggle-split" rippleEffect>
									<span class="sr-only">Toggle Dropdown</span>
								</button>
								<div ngbDropdownMenu>
									<a ngbDropdownItem href="javascript:void(0)" (click)="addFromForm()">{{labels.grid}}</a>
									<a ngbDropdownItem href="javascript:void(0)" (click)="nextClicked()">Next</a>
								</div>
							</div>
						</div>
					</form>
				</ng-template>
			</li>
			<li ngbNavItem>
				<a ngbNavLink>Use Existing</a>
				<ng-template ngbNavContent>
					<h6>Add Existing Child</h6>
					<form [formGroup]="childLookupForm" (onSubmit)="doLookup()">
						<table class="table table-sm lookup-table">
							<thead>
								<th></th>
								<th>
									<label>
										First Name
									</label>
									<input type="text" class="form-control form-control-sm" formControlName="firstName"/>
								</th>
								<th>
									<label>
										Middle Name
									</label>
									<input type="text" class="form-control form-control-sm" formControlName="middleName"/>
								</th>
								<th>
									<label>
										Last Name
									</label>
									<input type="text" class="form-control form-control-sm"  formControlName="lastName"/>
								</th>
								<th>
									<label>
										Nationality
									</label>
									<input type="text" class="form-control form-control-sm"  formControlName="countryName"/>
								</th>
								<th class="lookup-button-container">
									<input type="button" class="btn btn-secondary btn-sm" value="Lookup" (click)="doLookup()" />
								</th>
							</thead>
							<tbody>
								<tr *ngFor="let child of lookupChildren">
									<td>
										<img [src]="child.photoDataUrl" width="50" height="50"/>
									</td>
									<td>
										{{child.firstName}}
									</td>
									<td>
										{{child.middleName}}
									</td>
									<td>
										{{child.lastName}}
									</td>
									<td>
										{{child.countryName}}
									</td>
									<td>
										<div ngbDropdown class="btn-group btn-group-sm" placement="left-top">
											<button type="button" class="btn btn-primary btn-sm btn-next" (click)="addFromLookupAndNext(child)" rippleEffect>
												Add And Next
												<i data-feather="arrow-right" class="align-middle ml-sm-25 ml-0"></i>
											</button>
											<button ngbDropdownToggle type="button" class="btn btn-primary btn-sm dropdown-toggle-split" rippleEffect>
												<span class="sr-only">Toggle Dropdown</span>
											</button>
											<div ngbDropdownMenu>
												<a ngbDropdownItem href="javascript:void(0)" (click)="addFromLookup(child)">Add</a>
											</div>
										</div>
									</td>
								</tr>
							</tbody>
						</table>
					</form>
					<div class="d-flex justify-content-between">
						<button class="btn btn-primary btn-prev" (click)="previousClicked()" rippleEffect>
							<i data-feather="arrow-left" class="align-middle mr-sm-25 mr-0"></i>
							<span class="align-middle d-sm-inline-block d-none">Previous</span>
						</button>
						<button class="btn btn-primary btn-prev" (click)="nextClicked()" rippleEffect>
							<i data-feather="arrow-right" class="align-middle mr-sm-25 mr-0"></i>
							<span class="align-middle d-sm-inline-block d-none">Next</span>
						</button>
					</div>
        		</ng-template>
			</li>
		</ul>
		<div [ngbNavOutlet]="navVerticalRight"></div>
	</div>
	<hr>
	<table class="table" *ngIf="childFormData.children?.length">
		<thead>
			<th>#</th>
			<th>Picture</th>
			<th>First Name</th>
			<th>Middle Name</th>
			<th>Last Name</th>
			<th></th>
		</thead>
		<tbody>
			<ng-template ngFor let-child [ngForOf]="childFormData.children" let-i="index">
				<tr>
					<td>
						{{i + 1}}
					</td>
					<td>
						<img [src]="child.photo || child.photoDataUrl" width="50" height="50">
					</td>
					<td>
						{{child.firstName}}
					</td>
					<td>
						{{child.middleName}}
					</td>
					<td>
						{{child.lastName}}
					</td>
					<td class="overflow-hidden">
						<div ngbDropdown container="body">
							<button type="button" class="btn btn-sm hide-arrow" ngbDropdownToggle data-toggle="dropdown">
								<i data-feather="more-vertical"></i>
							</button>
							<div ngbDropdownMenu>
								<a ngbDropdownItem href="javascript:void(0);" (click)="editRow(i)" *ngIf="!child.childId">
									<i data-feather="edit" class="mr-50"></i>
									<span>Edit</span>
								</a>
								<a ngbDropdownItem href="javascript:void(0);" (click)="deleteRow(i)">
									<i data-feather="trash" class="mr-50"></i>
									<span>Delete</span>
								</a>
							</div>
						</div>
					</td>
				</tr>
			</ng-template>
		</tbody>
	</table>
</div>